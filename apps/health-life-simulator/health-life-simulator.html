<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¥åº·ãƒ©ã‚¤ãƒ•ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script>
        // Babelã®è­¦å‘Šã‚’æŠ‘åˆ¶
        const originalWarn = console.warn;
        console.warn = function(...args) {
            const message = args[0];
            if (typeof message === 'string' && message.includes('in-browser Babel transformer')) {
                return;
            }
            originalWarn.apply(console, args);
        };
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem 1rem;
        }
        .container {
            max-width: 56rem;
            margin: 0 auto;
        }
        .card {
            background: white;
            border-radius: 1rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            padding: 2rem;
        }
        .title {
            font-size: 2.25rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 0.5rem;
            background: linear-gradient(to right, #9333ea, #2563eb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .subtitle {
            text-align: center;
            color: #4b5563;
            margin-bottom: 2rem;
        }
        .param-card {
            padding: 1.5rem;
            border-radius: 0.75rem;
            margin-bottom: 1.5rem;
        }
        .param-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 1rem;
        }
        .slider {
            width: 100%;
            height: 0.5rem;
            border-radius: 0.5rem;
            outline: none;
            -webkit-appearance: none;
            cursor: pointer;
        }
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 1.5rem;
            height: 1.5rem;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .slider::-moz-range-thumb {
            width: 1.5rem;
            height: 1.5rem;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .param-value {
            text-align: right;
            margin-top: 0.5rem;
            font-size: 1.5rem;
            font-weight: bold;
        }
        .btn-primary {
            width: 100%;
            background: linear-gradient(to right, #9333ea, #2563eb);
            color: white;
            font-size: 1.25rem;
            font-weight: bold;
            padding: 1rem;
            border-radius: 0.75rem;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .btn-primary:hover:not(:disabled) {
            background: linear-gradient(to right, #7e22ce, #1d4ed8);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .results-card {
            background: linear-gradient(to right, #ede9fe, #dbeafe);
            padding: 1.5rem;
            border-radius: 0.75rem;
            margin-top: 2rem;
        }
        .results-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 1rem;
        }
        .results-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
        }
        @media (min-width: 768px) {
            .results-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        .result-item {
            background: white;
            padding: 1rem;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .result-label {
            font-size: 0.875rem;
            color: #4b5563;
            margin-bottom: 0.25rem;
        }
        .result-value {
            font-size: 1.875rem;
            font-weight: bold;
        }
        .progress-bar {
            width: 100%;
            background: #e5e7eb;
            border-radius: 9999px;
            height: 0.5rem;
            margin-top: 0.5rem;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            border-radius: 9999px;
            transition: width 0.5s;
        }
        .advice-card {
            background: linear-gradient(to right, #d1fae5, #a7f3d0);
            padding: 1.5rem;
            border-radius: 0.75rem;
            margin-top: 1.5rem;
        }
        .advice-content {
            background: white;
            padding: 1.5rem;
            border-radius: 0.5rem;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.06);
        }
        .advice-text {
            color: #374151;
            line-height: 1.75;
            white-space: pre-wrap;
        }
        .footer {
            text-align: center;
            margin-top: 1.5rem;
            color: white;
            font-size: 0.875rem;
        }
        .color-green { color: #16a34a; }
        .color-yellow { color: #ca8a04; }
        .color-red { color: #dc2626; }
        .color-gray { color: #4b5563; }
        .bg-green { background: linear-gradient(to right, #4ade80, #16a34a); }
        .bg-blue { background: linear-gradient(to right, #60a5fa, #2563eb); }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;

        function HealthSimulator() {
            const [params, setParams] = useState({
                sleep: 7,
                diet: 7,
                exercise: 5,
                stress: 5,
                alcohol: 2,
                smoking: 0
            });
            
            const [results, setResults] = useState(null);
            const [aiAdvice, setAiAdvice] = useState(null);
            const [isLoading, setIsLoading] = useState(false);

            const handleChange = (key, value) => {
                setParams(prev => ({ ...prev, [key]: parseFloat(value) }));
            };

            const calculateResults = () => {
                const stamina = Math.round(
                    (params.sleep / 10) * 25 +
                    (params.diet / 10) * 20 +
                    (params.exercise / 10) * 30 -
                    (params.stress / 10) * 10 -
                    (params.alcohol / 10) * 10 -
                    (params.smoking / 10) * 15
                );

                const focus = Math.round(
                    (params.sleep / 10) * 30 +
                    (params.diet / 10) * 15 +
                    (params.exercise / 10) * 15 -
                    (params.stress / 10) * 25 -
                    (params.alcohol / 10) * 10 -
                    (params.smoking / 10) * 5
                );

                const lifeImpact = 
                    ((params.sleep - 7) / 3) * 2 +
                    ((params.diet - 5) / 5) * 3 +
                    ((params.exercise - 3) / 7) * 4 -
                    ((params.stress - 5) / 5) * 3 -
                    (params.alcohol / 10) * 5 -
                    (params.smoking / 10) * 10;

                return {
                    stamina: Math.max(0, Math.min(100, stamina)),
                    focus: Math.max(0, Math.min(100, focus)),
                    lifeImpact: Math.round(lifeImpact * 10) / 10
                };
            };

            const getAIAdvice = async () => {
                setIsLoading(true);
                
                const results = calculateResults();
                setResults(results);

                try {
                    const response = await fetch("https://api.anthropic.com/v1/messages", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                        },
                        body: JSON.stringify({
                            model: "claude-sonnet-4-20250514",
                            max_tokens: 1500,
                            messages: [{
                                role: "user",
                                content: `ã‚ãªãŸã¯å¥åº·ã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒ¼ã®AIã§ã™ã€‚ä»¥ä¸‹ã®ç”Ÿæ´»ç¿’æ…£ãƒ‡ãƒ¼ã‚¿ã¨ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çµæœã‹ã‚‰ã€å…·ä½“çš„ã§å®Ÿè·µçš„ãªæ”¹å–„ææ¡ˆã‚’æ—¥æœ¬èªã§æä¾›ã—ã¦ãã ã•ã„ã€‚

ã€ç¾åœ¨ã®ç”Ÿæ´»ç¿’æ…£ã€‘
- ç¡çœ æ™‚é–“: ${params.sleep}æ™‚é–“/æ—¥
- é£Ÿäº‹ãƒãƒ©ãƒ³ã‚¹: ${params.diet}/10ç‚¹
- é‹å‹•é‡: ${params.exercise}/10ç‚¹
- ã‚¹ãƒˆãƒ¬ã‚¹ãƒ¬ãƒ™ãƒ«: ${params.stress}/10ç‚¹
- é£²é…’é »åº¦: ${params.alcohol}/10ç‚¹
- å–«ç…™é »åº¦: ${params.smoking}/10ç‚¹

ã€ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çµæœã€‘
- ä½“åŠ›ãƒ¬ãƒ™ãƒ«: ${results.stamina}/100
- é›†ä¸­åŠ›: ${results.focus}/100
- å¯¿å‘½äºˆæ¸¬: ${results.lifeImpact > 0 ? '+' : ''}${results.lifeImpact}å¹´

ä»¥ä¸‹ã®å½¢å¼ã§ã€ç°¡æ½”ã‹ã¤å…·ä½“çš„ã«ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã—ã¦ãã ã•ã„ï¼š

1. ç·åˆè©•ä¾¡ï¼ˆ2-3æ–‡ã§ï¼‰
2. æœ€å„ªå…ˆã§æ”¹å–„ã™ã¹ãé …ç›®ï¼ˆ1ã¤ï¼‰ã¨ãã®ç†ç”±
3. å…·ä½“çš„ãªæ”¹å–„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆ3ã¤ã€ãã‚Œãã‚Œå®Ÿè·µã—ã‚„ã™ã„æ–¹æ³•ï¼‰
4. æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ

ç®‡æ¡æ›¸ãã‚’ä½¿ã‚ãšã€è‡ªç„¶ãªæ–‡ç« ã§æ›¸ã„ã¦ãã ã•ã„ã€‚`
                            }]
                        })
                    });

                    const data = await response.json();
                    setAiAdvice(data.content[0].text);
                } catch (error) {
                    setAiAdvice("AIã‚¢ãƒ‰ãƒã‚¤ã‚¹ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚");
                }
                
                setIsLoading(false);
            };

            const getValueColor = (value) => {
                if (value >= 70) return 'color-green';
                if (value >= 40) return 'color-yellow';
                return 'color-red';
            };

            const getLifeColor = (value) => {
                if (value > 0) return 'color-green';
                if (value === 0) return 'color-gray';
                return 'color-red';
            };

            return (
                <div className="container">
                    <div className="card">
                        <h1 className="title">ğŸƒâ€â™‚ï¸ å¥åº·ãƒ©ã‚¤ãƒ•ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</h1>
                        <p className="subtitle">ã‚ãªãŸã®ç”Ÿæ´»ç¿’æ…£ã‹ã‚‰å¥åº·çŠ¶æ…‹ã‚’åˆ†æã—ã¾ã™</p>

                        <div>
                            <div className="param-card" style={{background: 'linear-gradient(to right, #dbeafe, #e0e7ff)'}}>
                                <h2 className="param-title">ğŸ˜´ ç¡çœ æ™‚é–“</h2>
                                <input
                                    type="range"
                                    min="3"
                                    max="12"
                                    step="0.5"
                                    value={params.sleep}
                                    onChange={(e) => handleChange('sleep', e.target.value)}
                                    className="slider"
                                    style={{background: '#bfdbfe'}}
                                />
                                <div className="param-value" style={{color: '#2563eb'}}>{params.sleep}æ™‚é–“</div>
                            </div>

                            <div className="param-card" style={{background: 'linear-gradient(to right, #d1fae5, #dcfce7)'}}>
                                <h2 className="param-title">ğŸ¥— é£Ÿäº‹ãƒãƒ©ãƒ³ã‚¹</h2>
                                <input
                                    type="range"
                                    min="0"
                                    max="10"
                                    step="1"
                                    value={params.diet}
                                    onChange={(e) => handleChange('diet', e.target.value)}
                                    className="slider"
                                    style={{background: '#86efac'}}
                                />
                                <div className="param-value" style={{color: '#16a34a'}}>{params.diet}/10ç‚¹</div>
                            </div>

                            <div className="param-card" style={{background: 'linear-gradient(to right, #fed7aa, #fef3c7)'}}>
                                <h2 className="param-title">ğŸ’ª é‹å‹•é‡</h2>
                                <input
                                    type="range"
                                    min="0"
                                    max="10"
                                    step="1"
                                    value={params.exercise}
                                    onChange={(e) => handleChange('exercise', e.target.value)}
                                    className="slider"
                                    style={{background: '#fdba74'}}
                                />
                                <div className="param-value" style={{color: '#ea580c'}}>{params.exercise}/10ç‚¹</div>
                            </div>

                            <div className="param-card" style={{background: 'linear-gradient(to right, #fecaca, #fbcfe8)'}}>
                                <h2 className="param-title">ğŸ˜° ã‚¹ãƒˆãƒ¬ã‚¹ãƒ¬ãƒ™ãƒ«</h2>
                                <input
                                    type="range"
                                    min="0"
                                    max="10"
                                    step="1"
                                    value={params.stress}
                                    onChange={(e) => handleChange('stress', e.target.value)}
                                    className="slider"
                                    style={{background: '#fca5a5'}}
                                />
                                <div className="param-value" style={{color: '#dc2626'}}>{params.stress}/10ç‚¹</div>
                            </div>

                            <div className="param-card" style={{background: 'linear-gradient(to right, #fde68a, #fed7aa)'}}>
                                <h2 className="param-title">ğŸº é£²é…’é »åº¦</h2>
                                <input
                                    type="range"
                                    min="0"
                                    max="10"
                                    step="1"
                                    value={params.alcohol}
                                    onChange={(e) => handleChange('alcohol', e.target.value)}
                                    className="slider"
                                    style={{background: '#fcd34d'}}
                                />
                                <div className="param-value" style={{color: '#d97706'}}>{params.alcohol}/10ç‚¹</div>
                            </div>

                            <div className="param-card" style={{background: 'linear-gradient(to right, #e5e7eb, #e2e8f0)'}}>
                                <h2 className="param-title">ğŸš¬ å–«ç…™é »åº¦</h2>
                                <input
                                    type="range"
                                    min="0"
                                    max="10"
                                    step="1"
                                    value={params.smoking}
                                    onChange={(e) => handleChange('smoking', e.target.value)}
                                    className="slider"
                                    style={{background: '#d1d5db'}}
                                />
                                <div className="param-value" style={{color: '#6b7280'}}>{params.smoking}/10ç‚¹</div>
                            </div>
                        </div>

                        <button
                            onClick={getAIAdvice}
                            disabled={isLoading}
                            className="btn-primary"
                        >
                            {isLoading ? 'åˆ†æä¸­...' : 'ğŸ” å¥åº·è¨ºæ–­ã‚’å®Ÿè¡Œ'}
                        </button>

                        {results && (
                            <div>
                                <div className="results-card">
                                    <h2 className="results-title">ğŸ“Š ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çµæœ</h2>
                                    
                                    <div className="results-grid">
                                        <div className="result-item">
                                            <div className="result-label">ä½“åŠ›ãƒ¬ãƒ™ãƒ«</div>
                                            <div className={`result-value ${getValueColor(results.stamina)}`}>
                                                {results.stamina}/100
                                            </div>
                                            <div className="progress-bar">
                                                <div 
                                                    className="progress-fill bg-green"
                                                    style={{ width: `${results.stamina}%` }}
                                                ></div>
                                            </div>
                                        </div>

                                        <div className="result-item">
                                            <div className="result-label">é›†ä¸­åŠ›</div>
                                            <div className={`result-value ${getValueColor(results.focus)}`}>
                                                {results.focus}/100
                                            </div>
                                            <div className="progress-bar">
                                                <div 
                                                    className="progress-fill bg-blue"
                                                    style={{ width: `${results.focus}%` }}
                                                ></div>
                                            </div>
                                        </div>

                                        <div className="result-item">
                                            <div className="result-label">å¯¿å‘½äºˆæ¸¬</div>
                                            <div className={`result-value ${getLifeColor(results.lifeImpact)}`}>
                                                {results.lifeImpact > 0 ? '+' : ''}{results.lifeImpact}å¹´
                                            </div>
                                            <div style={{fontSize: '0.75rem', color: '#6b7280', marginTop: '0.5rem'}}>
                                                åŸºæº–å¹´é½¢: 80æ­³
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div className="advice-card">
                                    <h2 className="results-title">ğŸ¤– AIã®æ”¹å–„ææ¡ˆ</h2>
                                    <div className="advice-content">
                                        {isLoading ? (
                                            <div style={{textAlign: 'center', padding: '2rem'}}>
                                                <div style={{
                                                    display: 'inline-block',
                                                    width: '40px',
                                                    height: '40px',
                                                    border: '4px solid #e5e7eb',
                                                    borderTop: '4px solid #9333ea',
                                                    borderRadius: '50%',
                                                    animation: 'spin 1s linear infinite'
                                                }}></div>
                                                <div style={{
                                                    marginTop: '1rem',
                                                    color: '#6b7280',
                                                    fontSize: '1rem'
                                                }}>AIåˆ†æä¸­...</div>
                                            </div>
                                        ) : aiAdvice ? (
                                            <div className="advice-text">{aiAdvice}</div>
                                        ) : null}
                                    </div>
                                </div>
                            </div>
                        )}

                        {!results && (
                            <div className="advice-card" style={{marginTop: '2rem'}}>
                                <h2 className="results-title">ğŸ¤– AIã®æ”¹å–„ææ¡ˆ</h2>
                                <div className="advice-content">
                                    <div style={{
                                        textAlign: 'center',
                                        padding: '2rem',
                                        color: '#6b7280'
                                    }}>
                                        ã€Œå¥åº·è¨ºæ–­ã‚’å®Ÿè¡Œã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€AIãŒã‚ãªãŸã®ç”Ÿæ´»ç¿’æ…£ã‚’åˆ†æã—ã€å€‹åˆ¥ã®æ”¹å–„ææ¡ˆã‚’æä¾›ã—ã¾ã™ã€‚
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>

                    <div className="footer">
                        â€» ã“ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã¯æ•™è‚²ç›®çš„ã§ã™ã€‚åŒ»ç™‚ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã®ä»£ã‚ã‚Šã«ã¯ãªã‚Šã¾ã›ã‚“ã€‚
                    </div>
                </div>
            );
        }

        ReactDOM.render(<HealthSimulator />, document.getElementById('root'));
    </script>
</body>
</html>